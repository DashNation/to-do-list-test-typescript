let addBtn=document.getElementById("addBtn"),editBtn=document.getElementById("editBtn"),removeBtn=document.getElementById("removeBtn"),todoValueInputField=document.getElementById("todoValueInputField"),noteList=document.getElementById("noteList"),noteCount=0,isEditActive=!1,isRemoveActive=!1;window.addEventListener("keydown",e=>{"e"===e.key.toLocaleLowerCase()&&e.altKey&&((isEditActive=!isEditActive)?editBtn.classList.add("active"):editBtn.classList.remove("active"))}),window.addEventListener("keydown",e=>{"r"===e.key.toLocaleLowerCase()&&e.altKey&&((isRemoveActive=!isRemoveActive)?(removeBtn.classList.add("active"),addRemoveNoteBtns):(removeBtn.classList.remove("active"),removeRemoveNoteBtns))()});class Note{note;id;constructor(e){this.note=todoValueInputField.value.trim(),this.id=noteCount++}addNote(){var e,t;""!==this.note&&((e=document.createElement("div")).classList.add("noteListItemWrapper"),e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="start",e.style.alignItems="center",e.style.width="100%",e.style.height="100%",noteList.appendChild(e),(t=document.createElement("li")).classList.add("listElement"),t.innerHTML=this.note,t.id=""+this.id,e.appendChild(t))}static editNote(e){let t=document.createElement("div"),n=(t.id="userInputWrapper",t.style.display="flex",t.style.flexDirection="row",t.style.alignItems="center",t.style.justifyContent="space-between",t.style.gap="0.05rem",noteList.appendChild(t),e.textContent||""),s=document.createElement("input"),i=(s.value=n,s.id="userInputField",s.classList.add("userInputField"),s.type="text",document.createElement("button"));i.classList.add("checkBtn"),i.classList.add("btn");var d=document.createElement("img");d.src="SVG/checkMark24.svg",d.classList.add("check"),i.appendChild(d);let o=document.createElement("button");o.classList.add("crossBtn"),o.classList.add("btn");d=document.createElement("img");function l(){var e=document.createElement("li");e.value;e.textContent=s.value,e.classList.add("listElement"),t.replaceWith(e),i.remove(),o.remove()}function a(e){var t=document.createElement("li");t.textContent=e,t.classList.add("listElement"),s.replaceWith(t),i.remove(),o.remove()}d.src="SVG/cross50.svg",d.classList.add("cross"),o.appendChild(d),t.appendChild(s),t.appendChild(i),t.appendChild(o),e.replaceWith(t),s.focus();let c=!1;i.addEventListener("mousedown",()=>{c=!0,l()}),o.addEventListener("mousedown",()=>{c=!0,a(n)}),s.addEventListener("keydown",e=>{c||("Enter"===e.key&&l(),"Escape"===e.key&&(console.log("Escape Pressed!"),a(n)))}),s.addEventListener("blur",()=>{c||l()})}}function ClickAddNoteHandler(e){""!==todoValueInputField.value&&(new Note(todoValueInputField.value).addNote(),todoValueInputField.value="",checkNodeListChildren())}addBtn.addEventListener("click",e=>{e.preventDefault(),ClickAddNoteHandler(e)}),editBtn.addEventListener("click",e=>{(isEditActive=!isEditActive)?editBtn.classList.add("active"):editBtn.classList.remove("active")}),removeBtn.addEventListener("click",e=>{((isRemoveActive=!isRemoveActive)?(removeBtn.classList.add("active"),addRemoveNoteBtns):(removeBtn.classList.remove("active"),removeRemoveNoteBtns))()}),todoValueInputField.addEventListener("keyup",e=>{"Enter"===e.key&&(e.preventDefault(),ClickAddNoteHandler(e))}),document.addEventListener("DOMContentLoaded",checkNodeListChildren),document.addEventListener("change",checkNodeListChildren);let emptyListMsg=document.createElement("p");function checkNodeListChildren(){0===noteList.querySelectorAll("li").length?(noteList.contains(emptyListMsg)||((emptyListMsg=document.createElement("p")).innerHTML="No thoughts collected...",emptyListMsg.id="emptyListTxt",noteList.appendChild(emptyListMsg)),emptyListMsg.style.display="block"):(noteList.contains(emptyListMsg)&&noteList.removeChild(emptyListMsg),emptyListMsg.style.display="none")}function editBtnClickHandler(e){"LI"===e.tagName&&Note.editNote(e)}function removeNoteBtnClickHandler(e){console.log("removeNoteBtn pressed!");e=e.closest(".noteListItemWrapper");e&&e.remove()}function addRemoveNoteBtns(){Array.from(noteList.children).forEach(e=>{var t=document.createElement("button"),n=(t.classList.add("btn"),t.classList.add("removeNoteBtn"),t.style.justifyContent="center",removeBtn.style.alignItems="center",document.createElement("img"));n.src="SVG/minus.svg",n.classList.add("minus"),t.appendChild(n),e.appendChild(t),t.addEventListener("click",e=>{var e=e.target;e&&(e=e.closest(".noteListItemWrapper"))&&(e.remove(),checkNodeListChildren())})})}function removeRemoveNoteBtns(){Array.from(noteList.children).forEach(e=>{e=e.querySelector(".removeNoteBtn");e&&e.remove()})}noteList.addEventListener("dblclick",e=>{e=e.target.closest("li");e&&noteList.contains(e)&&(e.classList.contains("selectedItem")?e.classList.remove("selectedItem"):e.classList.add("selectedItem"),isEditActive)&&e.classList.contains("selectedItem")&&editBtnClickHandler(e)});